# Shadowrocket V10: 智能分流与精准控制
# 一个以黑名单模式为核心的配置，专注于速度、准确性与用户自定义能力。

[General]
bypass-system = true
skip-proxy = 192.168.0.0/16,10.0.0.0/8,172.16.0.0/12,localhost,*.local
tun-excluded-routes = 10.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.0.0.0/24, 192.0.2.0/24, 192.88.99.0/24, 192.168.0.0/16, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 255.255.255.255/32, 239.255.255.250/32
dns-server = 119.29.29.29,114.114.114.114,223.5.5.5,system
fallback-dns-server = system
ipv6 = false
prefer-ipv6 = false
dns-fallback-system = false
dns-direct-system = false
icmp-auto-reply = true
always-reject-url-rewrite = false
private-ip-answer = false

[Proxy Group]
# === 核心策略 (手动选择，内嵌自动与地区) ===
🌍 国外网站 = select,♻️ 自动选择,🇭🇰 香港节点,🇸🇬 新加坡节点,🇯🇵 日本节点,🇺🇸 美国节点,🇬🇧 英国节点,🇨🇳 台湾节点,🇰🇷 韩国节点,🇩🇪 德国,🇨🇦 加拿大

# === 新增：漏网之鱼专属策略 ===
🐠 漏网之鱼 = select,♻️ 自动选择,🇭🇰 香港节点,🇸🇬 新加坡节点,🇯🇵 日本节点,🇺🇸 美国节点,🇬🇧 英国节点,🇨🇳 台湾节点,🇰🇷 韩国节点,🇩🇪 德国,🇨🇦 加拿大

# === 自动化策略 (url-test) ===
♻️ 自动选择 = url-test,url=http://www.gstatic.com/generate_204,interval=300,tolerance=100,timeout=5,policy-regex-filter=.*

# === 专用服务策略 (手动选择) ===
🤖️ 人工智能 = select,🇺🇸 美国节点,🇬🇧 英国节点,🇯🇵 日本节点,🇸🇬 新加坡节点
🌀 谷歌服务 = select,🇺🇸 美国节点,🇯🇵 日本节点,🇸🇬 新加坡节点,🇭🇰 香港节点
💳 支付服务 = select,🇺🇸 美国节点,🇸🇬 新加坡节点,🇭🇰 香港节点,🇯🇵 日本节点
📲 Telegram = select,🌍 国外网站,🇭🇰 香港节点,🇸🇬 新加坡节点,🇺🇸 美国节点

# === 基础服务策略 ===
Ⓜ️ 微软服务 = select,DIRECT,🌍 国外网站,🇺🇸 美国节点
🍎 苹果服务 = select,DIRECT,🌍 国外网站

# === 地区节点筛选 (自动测速) ===
🇭🇰 香港节点 = url-test,url=http://www.gstatic.com/generate_204,interval=600,tolerance=100,timeout=5,policy-regex-filter=(?i)港|HK|Hong
🇺🇸 美国节点 = url-test,url=http://www.gstatic.com/generate_204,interval=600,tolerance=100,timeout=5,policy-regex-filter=(?i)美国|美國|US|States|American
🇯🇵 日本节点 = url-test,url=http://www.gstatic.com/generate_204,interval=600,tolerance=100,timeout=5,policy-regex-filter=(?i)日本|JP|Japan
🇸🇬 新加坡节点 = url-test,url=http://www.gstatic.com/generate_204,interval=600,tolerance=100,timeout=5,policy-regex-filter=(?i)新加坡|狮城|SG
🇬🇧 英国节点 = url-test,url=http://www.gstatic.com/generate_204,interval=600,tolerance=100,timeout=5,policy-regex-filter=(?i)英国|UK|England
🇨🇳 台湾节点 = url-test,url=http://www.gstatic.com/generate_204,interval=600,tolerance=100,timeout=5,policy-regex-filter=(?i)台|TW|Taiwan
🇰🇷 韩国节点 = url-test,url=http://www.gstatic.com/generate_204,interval=600,tolerance=100,timeout=5,policy-regex-filter=(?i)KR|Korea|KOR|韩|韓
🇩🇪 德国 = url-test,url=http://www.gstatic.com/generate_204,interval=600,tolerance=100,timeout=5,policy-regex-filter=(?i)德国|DE|Germany
🇨🇦 加拿大 = url-test,url=http://www.gstatic.com/generate_204,interval=600,tolerance=100,timeout=5,policy-regex-filter=(?i)加拿大|CA|Canada

[Rule]
# --- (最高优先级) 个人规则手动添加专区 ---
# 如果发现有名单遗漏的网站，在此处按格式添加即可
# 格式: DOMAIN-SUFFIX,域名,🐠 漏网之鱼
# 例如: DOMAIN-SUFFIX,some-blocked-website.com,🐠 漏网之鱼



# 1. 广告拦截 (可选启用)
# RULE-SET,https://whatshub.top/rule/AntiAD.list,REJECT

# 2. 高优先级专属规则 (支付, Gemini, 谷歌, AI)
DOMAIN-KEYWORD,paypal,💳 支付服务
DOMAIN-KEYWORD,wise,💳 支付服务
DOMAIN-KEYWORD,redotpay,💳 支付服务
DOMAIN-SUFFIX,aistudio.google.com,🤖️ 人工智能
DOMAIN-SUFFIX,ai.google.dev,🤖️ 人工智能
DOMAIN-SUFFIX,apis.google.com,🤖️ 人工智能
DOMAIN-KEYWORD,google,🌀 谷歌服务
RULE-SET,https://whatshub.top/rule/ai.list,🤖️ 人工智能
RULE-SET,https://whatshub.top/rule/Google.list,🌀 谷歌服务

# 3. 常用国际应用规则
RULE-SET,https://whatshub.top/rule/Telegram.list,📲 Telegram
RULE-SET,https://whatshub.top/rule/Microsoft.list,Ⓜ️ 微软服务
RULE-SET,https://whatshub.top/rule/Apple.list,🍎 苹果服务
RULE-SET,https://whatshub.top/rule/AppStore.list,🍎 苹果服务

# 4. 黑名单规则 (核心：Johnshall超全规则集)
RULE-SET,https://raw.githubusercontent.com/Johnshall/Shadowrocket-ADBlock-Rules-Forever/master/sr_top500_banlist.conf,🌍 国外网站
RULE-SET,https://whatshub.top/rule/AppleProxy.list,🌍 国外网站

# 5. 白名单规则 (必须直连的国内网站)
GEOIP,CN,DIRECT
RULE-SET,https://whatshub.top/rule/ChinaMedia.list,DIRECT
RULE-SET,https://whatshub.top/rule/WeChat.list,DIRECT
RULE-SET,https://whatshub.top/rule/ASN-CN.list,DIRECT

# 6. 最终兜底规则
FINAL,DIRECT

[URL Rewrite]
^https?://(www.)?g.cn https://www.google.com 302
^https?://(www.)?google.cn https://www.google.com 302
