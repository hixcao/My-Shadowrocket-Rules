# ===================================================================
# Shadowrocket V16: 您的个人模块化配置中心 (混合动力最终版)
# 设计师: hixcao & AI Assistant
# 新特性: 隐藏复杂性！在保持V14简洁界面的同时, 为每个地区节点无缝集成了故障转移(Fallback)功能。
# ===================================================================

[General]
bypass-system = true
skip-proxy = 192.168.0.0/16,10.0.0.0/8,172.16.0.0/12,localhost,*.local
tun-excluded-routes = 10.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.0.0.0/24, 192.0.2.0/24, 192.88.99.0/24, 192.168.0.0/16, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 255.255.255.255/32, 239.255.255.250/32
dns-server = 119.29.29.29,114.114.114.114,223.5.5.5,system
fallback-dns-server = system
ipv6 = false
prefer-ipv6 = false
dns-fallback-system = false
dns-direct-system = false
icmp-auto-reply = true
always-reject-url-rewrite = false
private-ip-answer = false

# ===================================================================
# 策略组 (Proxy Group): 简洁、扁平且强大
# ===================================================================
[Proxy Group]
# --- 顶层应用策略: 直观、简单，回归 V14 的操作体验 ---
# 每个选项背后都已内置Fallback，无需担心节点故障
🐠 漏网之鱼 = select, ♻️ 自动选择, 🇭🇰 香港节点, 🇸🇬 新加坡节点, 🇯🇵 日本节点, 🇺🇸 美国节点
🤖️ 人工智能 = select, 🇺🇸 美国节点 (Fallback), 🇯🇵 日本节点 (Fallback), 🇸🇬 新加坡节点 (Fallback), 🇬🇧 英国节点 (Fallback)
🪙 加密货币 = select, ♻️ 自动选择, 🇭🇰 香港节点 (Fallback), 🇸🇬 新加坡节点 (Fallback), 🇯🇵 日本节点 (Fallback), 🇺🇸 美国节点 (Fallback)
🌀 谷歌服务 = select, 🇭🇰 香港节点 (Fallback), 🇸🇬 新加坡节点 (Fallback), 🇯🇵 日本节点 (Fallback), 🇺🇸 美国节点 (Fallback)
📲 Telegram = select, ♻️ 自动选择, 🇭🇰 香港节点 (Fallback), 🇸🇬 新加坡节点 (Fallback), 🇺🇸 美国节点 (Fallback)
Ⓜ️ 微软服务 = select, DIRECT, ♻️ 自动选择
🍎 苹果服务 = select, DIRECT, ♻️ 自动选择

# --- 底层功能组: 这里是魔法发生的地方 ---
# (1) 基础的 url-test 节点组 (筛选地区)
🇭🇰 香港节点 = url-test,url=http://www.gstatic.com/generate_204,interval=600,tolerance=100,timeout=5,policy-regex-filter=(?i)港|HK|Hong
🇺🇸 美国节点 = url-test,url=http://www.gstatic.com/generate_204,interval=600,tolerance=100,timeout=5,policy-regex-filter=(?i)美国|美國|US|States|American
🇯🇵 日本节点 = url-test,url=http://www.gstatic.com/generate_204,interval=600,tolerance=100,timeout=5,policy-regex-filter=(?i)日本|JP|Japan
🇸🇬 新加坡节点 = url-test,url=http://www.gstatic.com/generate_204,interval=600,tolerance=100,timeout=5,policy-regex-filter=(?i)新加坡|狮城|SG
🇬🇧 英国节点 = url-test,url=http://www.gstatic.com/generate_204,interval=600,tolerance=100,timeout=5,policy-regex-filter=(?i)英国|UK|England

# (2) 带故障转移的“加强版”节点组 (为每个地区组添加保险)
🇭🇰 香港节点 (Fallback) = fallback, 🇭🇰 香港节点, ♻️ 自动选择
🇺🇸 美国节点 (Fallback) = fallback, 🇺🇸 美国节点, ♻️ 自动选择
🇯🇵 日本节点 (Fallback) = fallback, 🇯🇵 日本节点, ♻️ 自动选择
🇸🇬 新加坡节点 (Fallback) = fallback, 🇸🇬 新加坡节点, ♻️ 自动选择
🇬🇧 英国节点 (Fallback) = fallback, 🇬🇧 英国节点, ♻️ 自动选择

# (3) 全局自动选择组 (最终的保险)
♻️ 自动选择 = url-test,url=http://www.gstatic.com/generate_24,interval=300,tolerance=100,timeout=5,policy-regex-filter=.*


[Rule]
# ===================================================================
# 规则部分保持不变
# ===================================================================
RULE-SET,https://raw.githubusercontent.com/hixcao/My-Shadowrocket-Rules/main/OpenAI.conf,🤖️ 人工智能
RULE-SET,https://raw.githubusercontent.com/hixcao/My-Shadowrocket-Rules/main/Gemini.conf,🤖️ 人工智能
RULE-SET,https://raw.githubusercontent.com/hixcao/My-Shadowrocket-Rules/main/Google.conf,🌀 谷歌服务
RULE-SET,https://raw.githubusercontent.com/hixcao/My-Shadowrocket-Rules/main/Crypto.conf,🪙 加密货币
RULE-SET,https://whatshub.top/rule/Telegram.list,📲 Telegram
RULE-SET,https://whatshub.top/rule/Microsoft.list,Ⓜ️ 微软服务
RULE-SET,https://whatshub.top/rule/Apple.list,🍎 苹果服务
RULE-SET,https://whatshub.top/rule/AppStore.list,🍎 苹果服务
RULE-SET,https://raw.githubusercontent.com/Johnshall/Shadowrocket-ADBlock-Rules-Forever/master/sr_top500_banlist.conf,🐠 漏网之鱼
GEOIP,CN,DIRECT
RULE-SET,https://whatshub.top/rule/ChinaMedia.list,DIRECT
RULE-SET,https://whatshub.top/rule/WeChat.list,DIRECT
RULE-SET,https://whatshub.top/rule/ASN-CN.list,DIRECT
FINAL,DIRECT
